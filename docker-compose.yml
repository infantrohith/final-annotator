version: '3.8'\n\nservices:\n  backend:\n    build:\n      context: ./backend\n      dockerfile: ../docker/backend.Dockerfile\n    ports:\n      - "${BACKEND_PORT:-8000}:8000"\n    environment:\n      - DATABASE_URL=${DATABASE_URL}\n      - SECRET_KEY=${SECRET_KEY}\n      - DEBUG=${DEBUG:-False}\n    volumes:\n      - ./backend:/app\n      - ./uploads:/app/uploads\n    depends_on:\n      - db\n    networks:\n      - app-network\n\n  frontend:\n    build:\n      context: ./frontend\n      dockerfile: ../docker/frontend.Dockerfile\n    ports:\n      - "${FRONTEND_PORT:-3000}:3000"\n    volumes:\n      - ./frontend:/app\n      - /app/node_modules\n    environment:\n      - VITE_API_URL=${VITE_API_URL}\n    depends_on:\n      - backend\n    networks:\n      - app-network\n\n  db:\n    image: postgres:14-alpine\n    environment:\n      - POSTGRES_USER=${POSTGRES_USER}\n      - POSTGRES_PASSWORD=${POSTGRES_PASSWORD}\n      - POSTGRES_DB=${POSTGRES_DB}\n    volumes:\n      - postgres_data:/var/lib/postgresql/data\n    ports:\n      - "5432:5432"\n    networks:\n      - app-network\n\nvolumes:\n  postgres_data:\n\nnets:\n  app-network:\n    driver: bridge\n